# ğŸ“– GUIDE D'UTILISATION COMPLET - PLANIFICATEUR DE TERRAIN

Version : 2.0 RÃ‰VOLUTIONNAIRE  
Date : 18 octobre 2025

---

## ğŸš€ DÃ‰MARRAGE RAPIDE

### **Ã‰tape 1 : SÃ©lectionner vos arbres**
1. Cliquez sur **Comparer** (bouton vert en haut Ã  droite)
2. SÃ©lectionnez 2-3 arbres dans la liste
3. Comparez leurs caractÃ©ristiques

### **Ã‰tape 2 : Ouvrir le planificateur**
1. Cliquez sur **Planifier** (bouton bleu)
2. Au premier lancement : **Onboarding interactif** (5 Ã©tapes)
3. Suivez le guide ou cliquez "Passer"

### **Ã‰tape 3 : CrÃ©er votre plan**
Le planificateur s'ouvre avec :
- **Plan par dÃ©faut** : ClÃ´ture, maison, pavÃ©s
- **Arbres sÃ©lectionnÃ©s** : PlacÃ©s automatiquement
- **Interface organisÃ©e** : Dashboard (gauche), Outils (droite), Timeline (bas)

---

## ğŸ¨ INTERFACE DÃ‰TAILLÃ‰E

### **ğŸ“Š Dashboard (Gauche)**
Position : Fixe Ã  gauche (20px)

**Affichage en temps rÃ©el :**
- ğŸŒ³ **Arbres** : Nombre total (Ã  planter + existants)
- ğŸ“ **Surfaces** : 
  - Totale : mÂ² disponibles
  - PlantÃ©e : Somme des couronnes arbres
  - MinÃ©rale : Terrasses + pavÃ©s
  - Libre : Ce qui reste
- ğŸ“Š **Barre graphique** : RÃ©partition visuelle (vert/gris/blanc)
- ğŸ¦‹ **BiodiversitÃ©** : 
  - Score 0-100
  - â­â­â­â­â­ (5 Ã©toiles max)
  - MellifÃ¨res, fruitiers comptabilisÃ©s
- ğŸ’§ **Arrosage** : Litres/semaine estimÃ©s
- â±ï¸ **Entretien** : Heures/mois (30min/arbre)
- âš–ï¸ **ConformitÃ©** : % rÃ©glementaire
  - ğŸŸ¢ 100% : Parfait
  - ğŸŸ¡ 80-99% : Avertissements
  - ğŸ”´ <80% : ProblÃ¨mes
- ğŸŒ **Composition du sol** :
  - Visualisation 2 couches
  - Profondeurs (cm)
  - Types (fertile, argileux, etc.)
  - **Bouton âœï¸ Modifier**

**Mise Ã  jour :** Automatique toutes les 2 secondes

---

### **ğŸ› ï¸ Palette d'Outils (Droite)**
Position : Fixe Ã  droite (20px)  
DÃ©plaÃ§able : Glisser sur la barre du haut

**ğŸ—ï¸ Structures :**
- ğŸ  **Maison** (10m Ã— 10m, H: 7m)
  - Clic pour placer
  - Double-clic pour Ã©diter hauteur
  - Fondations Ã©ditables
- ğŸ¡ **Terrasse** (4m Ã— 3m)
  - Redimensionnable
- ğŸŸ© **PavÃ©s enherbÃ©s** (5m Ã— 5m)
  - Zones permÃ©ables

**ğŸ”§ RÃ©seaux :**
- ğŸš° **Canalisation** (prof. 0.6m)
  - Ligne grise continue
  - Double-clic pour courber
  - Profondeur Ã©ditable
- ğŸ’§ **Citerne/Fosse** (2m Ã— 3m, prof. 2.5m)
  - Validation 3D automatique
- ğŸš§ **ClÃ´ture** (limite propriÃ©tÃ©)
  - Ligne jaune pointillÃ©e
  - = Limite lÃ©gale voisinage
  - Double-clic pour courber

**ğŸŒ³ VÃ©gÃ©tation :**
- ğŸŒ³ **Arbre existant** (rayon 2.5m)
  - Vert, Ã  conserver

**ğŸ‘ï¸ Affichage :**
- ğŸ‘ï¸ **Zones contraintes** (ON/OFF)
  - Halos colorÃ©s distances lÃ©gales
  - ğŸ”´ Rouge : Interdit
  - ğŸŸ  Orange : Attention
  - ğŸŸ¡ Jaune : Limite
- â˜€ï¸ **Ombre maison** (ON/OFF)
  - Selon saison et hauteur
  - Active sÃ©lecteur saisons

**âš¡ Actions :**
- ğŸ”’ **Verrouiller** : EmpÃªche dÃ©placement
- ğŸ—‘ï¸ **Supprimer** : Efface sÃ©lection (ou touche Suppr)
- âš ï¸ **Tout effacer** : RÃ©initialise plan complet

**ğŸ“· Image de fond :**
- Charger plan Kazaplan, cadastre, photo
- RÃ©gler opacitÃ© (0-100%)
- Superposition au-dessus grille

---

### **ğŸ“… Timeline de Croissance (Bas)**
Position : Fixe en bas, centrÃ©e

**Slider temporel :**
- **0 ans** : Plantation (H: 2m, Ã˜: 0.8m, Tronc: âŒ€5cm)
- **1-19 ans** : Croissance progressive
- **20+ ans** : MaturitÃ© (taille adulte max)

**Affichage :**
- ğŸŒ± Plantation - Jeune plant
- ğŸŒ¿ X ans - Croissance en cours (~X% maturitÃ©)
- ğŸŒ³ MaturitÃ© atteinte

**Effet en temps rÃ©el :**
- Ellipses arbres s'agrandissent
- Labels mis Ã  jour
- Cercle tronc adaptÃ©
- Zones contraintes recalculÃ©es

**SÃ©lecteur saisons** (si ombre activÃ©e) :
- â„ï¸ **Hiver** : Soleil bas 18Â° â†’ Ombre 21m
- ğŸŒ¸ **Printemps** : Ã‰quinoxe 45Â° â†’ Ombre 7m
- â˜€ï¸ **Ã‰tÃ©** : Soleil haut 65Â° â†’ Ombre 3m
- ğŸ‚ **Automne** : Ã‰quinoxe 45Â° â†’ Ombre 7m

---

## ğŸ¯ UTILISATION AVANCÃ‰E

### **CrÃ©er un plan de A Ã  Z**

**1. DÃ©finir le terrain :**
- Ajouter **ğŸš§ ClÃ´tures** pour dÃ©limiter
- Double-cliquer sur ligne pour crÃ©er angles
- Connecter les lignes

**2. Placer les structures :**
- ğŸ  **Maison** : Position + taille exacte
- ğŸ¡ **Terrasse** : OÃ¹ vous voulez
- ğŸŸ© **PavÃ©s** : Zones parking/stationnement

**3. RÃ©seaux enterrÃ©s :**
- ğŸš° **Canalisations** : Tracer depuis maison
- ğŸ’§ **Citerne/Fosse** : Position Ã©loignÃ©e

**4. VÃ©gÃ©tation existante :**
- ğŸŒ³ **Arbres existants** : Ceux Ã  garder

**5. Placer nouveaux arbres :**
- DÃ©jÃ  placÃ©s automatiquement !
- **DÃ©placer** : Glisser-dÃ©poser
- **Validation live** : Couleur + lignes rouges

**6. Optimiser avec outils :**
- Activer **ğŸ‘ï¸ Zones** : Voir interdictions
- Activer **â˜€ï¸ Ombre** : Tester saisons
- **Timeline** : Tester dans 10 ans

---

### **Validation en temps rÃ©el**

**Pendant le dÃ©placement d'un arbre :**

**Visuel sur canvas :**
- â­• **Cercle tronc** (rouge) : DiamÃ¨tre selon Ã¢ge
- ğŸ”´ **Lignes rouges** : Vers obstacles trop proches
- ğŸ“ **Labels** : "ğŸ  3.2m < 5m requis"

**Panneau latÃ©ral (droite) :**
- ğŸ”´ **Rouge** : ProblÃ¨mes critiques (ILLÃ‰GAL)
- ğŸŸ  **Orange** : Avertissements
- ğŸŸ¢ **Vert** : Conforme âœ…

**Messages lÃ©gaux :**
```
âš–ï¸ ILLÃ‰GAL: Tronc dÃ©passe limite propriÃ©tÃ©
   â†’ Voisin peut exiger arrachage

âš–ï¸ DISTANCE LÃ‰GALE NON RESPECTÃ‰E: 1.5m < 2m
   (Code Civil Art. 671)
   â†’ Voisin peut exiger arrachage ou taille Ã  2m
```

---

### **Modifier les objets**

**Dimensions (rectangles) :**
- Cliquer sur **"10m"** (largeur) â†’ Saisir nouvelle valeur
- Cliquer sur **"7m"** (hauteur) â†’ Idem
- **DÃ©cimales acceptÃ©es** : 10.5m, 7.3m

**DiamÃ¨tre (cercles) :**
- Cliquer sur **"âŒ€ 5m"** â†’ Saisir
- Tronc + couronne adaptÃ©s

**Profondeur fondations (maison) :**
- Double-clic sur maison
- Saisir hauteur bÃ¢timent (7m par dÃ©faut)

**Composition du sol :**
- Dashboard â†’ Section ğŸŒ Sol
- Cliquer **âœï¸ Modifier**
- Saisir nom, profondeur (cm), type

---

### **Raccourcis clavier**

- **Suppr** : Supprimer sÃ©lection
- **Ctrl+D** : Dupliquer
- **â†‘ â†“ â† â†’** : DÃ©placer 10cm
- **Shift + â†‘** : DÃ©placer 1m
- **Double-clic ligne** : Ajouter point intermÃ©diaire
- **Clic mesure** : Ã‰diter valeur

---

## ğŸ” DEBUG & LOGS

### **Bouton ğŸ› (orange)**
Ouvre le visualiseur de logs

**Actions disponibles :**
- ğŸ”„ **RafraÃ®chir** : Recharge les logs
- ğŸ“Š **Statistiques** : Affiche stats console
- ğŸ’¾ **Exporter** : TÃ©lÃ©charge JSON
- ğŸ—‘ï¸ **Effacer** : Vide historique
- **Filtres** : Par niveau (error/warn/info/debug) ou composant

**Console globale :**
```javascript
// F12 â†’ Console
window.planificateurLogs.getHistory()  // Tous les logs
window.planificateurLogs.stats()       // Statistiques
window.planificateurLogs.export()      // Exporter JSON
window.planificateurLogs.clear()       // Effacer
```

---

## ğŸ’¡ ASTUCES & BONNES PRATIQUES

### **1. Commencer par les clÃ´tures**
- DÃ©limitez votre terrain en premier
- Double-cliquez pour crÃ©er des angles
- Cela dÃ©finit la limite lÃ©gale

### **2. Placer la maison en premier**
- Ã‰diter sa hauteur (7m par dÃ©faut)
- Activer l'ombre pour voir impact
- Tester les 4 saisons

### **3. Utiliser la timeline**
- Glisser Ã  **0 ans** : Voir taille plantation
- Glisser Ã  **10 ans** : Anticiper croissance
- Glisser Ã  **20+ ans** : VÃ©rifier maturitÃ©

### **4. Optimiser avec zones**
- Activer **ğŸ‘ï¸** pour voir zones interdites
- Ã‰viter zones rouges/oranges
- Rester dans zones vertes

### **5. Tester l'ombre**
- Activer **â˜€ï¸**
- Tester **â„ï¸ Hiver** : Ombre longue
- Placer arbres hÃ©liophiles au sud
- Placer arbres d'ombre au nord

### **6. Surveiller le dashboard**
- Score biodiversitÃ© : Viser â­â­â­â­â­
- ConformitÃ© : Maintenir 100%
- Arrosage : Minimiser (Ã©conomie eau)

---

## âš ï¸ ERREURS COURANTES

### **Arbres non visibles ?**
1. Ouvrir **ğŸ› Logs**
2. Filtrer par **CanvasTerrain**
3. Chercher :
   - "Arbres non ajoutÃ©s"
   - "Tentative ajout de X arbres"
   - "âœ… X arbres ajoutÃ©s"

### **Validation rouge permanente ?**
- Lire le **panneau latÃ©ral** (droite)
- Respecter distances indiquÃ©es
- RÃ©fÃ©rence : `reglementation.distancesLegales` dans donnÃ©es arbre

### **Plan ne se sauvegarde pas ?**
- Sauvegarde automatique dans localStorage
- VÃ©rifie localStorage actif (pas en navigation privÃ©e)
- Logs : Chercher "Plan sauvegardÃ©"

---

## ğŸ“Š CALCULS & FORMULES

### **Tailles arbres selon Ã¢ge :**
```
hauteur_actuelle = 2m + (hauteur_max - 2m) Ã— (annee / annees_maturite)
envergure_actuelle = 0.8m + (envergure_max - 0.8m) Ã— (annee / annees_maturite)
tronc_actuel = 5cm + (tronc_max - 5cm) Ã— (annee / annees_maturite)
```

### **Ombre portÃ©e :**
```
longueur_ombre = hauteur_maison / tan(angle_soleil)
direction = vers le nord (opposÃ© â˜€ï¸ SUD)
```

### **Score biodiversitÃ© :**
```
Score = 0
+ 30 si mellifÃ¨re (abeilles)
+ 25 si fructification (oiseaux)
+ 20 si â‰¥3 espÃ¨ces diffÃ©rentes
+ 15 si plantes locales
= Max 100
```

---

## ğŸ“ CONCEPTS CLÃ‰S

### **Validation 3D**
Compare profondeurs verticales :
- Racines arbre : 1-1.5m
- Fondations maison : 1.2m
- Canalisations : 0.6m
- Citerne : 2.5m

**Exemple critique :**
```
Racines 1.5m > Fondations 0.8m
â†’ ğŸ”´ CRITIQUE: Risque fissures
```

### **Code Civil Art. 671**
Distance lÃ©gale voisinage :
- Hauteur > 2m : Distance â‰¥ 2m de la limite
- Sanction : Voisin peut exiger arrachage
- ClÃ´tures = Limite de propriÃ©tÃ©

### **Timeline rÃ©aliste**
Croissance linÃ©aire basÃ©e sur :
- Vitesse croissance extraite (ex: "30-40 cm/an")
- AnnÃ©es maturitÃ© calculÃ©es
- Interpolation plantation â†’ adulte

---

## ğŸ“± RACCOURCIS & ASTUCES

### **Ã‰dition rapide :**
- **Clic mesure** : Changer taille
- **Double-clic maison** : Hauteur bÃ¢timent
- **Double-clic ligne** : Courber (point intermÃ©diaire)

### **Navigation :**
- **Scroll** : Zoom canvas (si activÃ©)
- **Glisser espace vide** : Pan (si activÃ©)

### **SÃ©lection :**
- **Clic** : SÃ©lectionner objet
- **Menu contextuel** : Verrouiller/Supprimer
- **Shift+Clic** : Multi-sÃ©lection (si activÃ©)

---

## ğŸ†˜ SUPPORT

### **ProblÃ¨me technique ?**
1. Bouton **ğŸ›** â†’ Logs
2. Exporter JSON
3. Partager logs pour diagnostic

### **Question fonctionnalitÃ© ?**
1. Bouton **â“** â†’ Onboarding
2. Revoir les 5 Ã©tapes guidÃ©es

### **Suggestions ?**
- Le planificateur est open-source
- Architecture modulaire
- Contributions bienvenues

---

**Bon jardinage ! ğŸŒ³ğŸ¡âœ¨**

